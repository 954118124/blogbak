(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{551:function(s,t,a){"use strict";a.r(t);var e=a(18),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-全局熔断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-全局熔断"}},[s._v("#")]),s._v(" 1 全局熔断")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[s._v("feign.hystrix.enabled = true "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启熔断")]),s._v("\nhystrix.command.default.execution.isolation.thread.timeoutInMilliseconds = 1000 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#熔断超时时间1S")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("当需要做熔断的全局参数配置时，如需要配置超时时间只需要将hystrix.command.XXX ，XXX为default。")]),s._v(" "),a("p",[s._v("hystrix的配置可在com.netflix.hystrix.HystrixCommandProperties类查看,具体有哪些配置。")])]),s._v(" "),a("h2",{attrs:{id:"_2-方法层级熔断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-方法层级熔断"}},[s._v("#")]),s._v(" 2 方法层级熔断")]),s._v(" "),a("p",[a("strong",[s._v("场景")]),s._v("：有时候我们需要对熔断粒度控制到方法层级，例如全局的熔断超时时间是2S,而某个feign的调用我们希望是6S,则可用如下配置。")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[s._v('hystrix.command."DispatchCodeFeign'),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#fetch(URI,DisPatchCodeDto)".execution.isolation.thread.timeoutInMilliseconds = 6000')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如上配置：只需要将command 后面加上相应的方法即可")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DispatchCodeFeign：具体的feign")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fetch：feign的方法")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# URI：参数1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DisPatchCodeDto：参数2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("注：现在百度上很多的文章，都是错的，如有的文章告诉你 方法后面的参数列表,除了基础类型和String以外都需要加上全路径的包名，通过debug HystrixCommandProperties类可以发现并非如此，而是直接写上类名即可。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);