(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{544:function(a,t,s){"use strict";s.r(t);var r=s(18),e=Object(r.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"_1-trace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-trace"}},[a._v("#")]),a._v(" 1 trace")]),a._v(" "),s("p",[a._v("利用trace命令追踪方法耗时。")]),a._v(" "),s("p",[a._v("https://arthas.aliyun.com/doc/trace.html")]),a._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"/img/media/5f987fcb30fb938420581eb30ec32d1f.png",width:"70%"}}),a._v(" "),s("p",[a._v("curl -O https://arthas.aliyun.com/arthas-boot.jar")]),a._v(" "),s("p",[a._v("java -jar arthas-boot.jar")]),a._v(" "),s("p",[a._v("trace com.yl.mhs.api.stream.kafka.receiver.WaybillOggApiReceiver doOggWaybillHandel")]),a._v(" "),s("h2",{attrs:{id:"_2-reset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-reset"}},[a._v("#")]),a._v(" 2 reset")]),a._v(" "),s("p",[a._v("通过reset命令可以重置增强类，将被 Arthas 增强过的类全部还原，"),s("strong",[a._v("Arthas 服务端关闭 时会重置所有增强过的类")]),a._v("。")]),a._v(" "),s("p",[a._v("Arthas在 watch/trace 等命令时，实际上是修改了应用的字节码，插入增强的代码。显式执行reset命令，可以清除掉这些增强代码。")]),a._v(" "),s("h2",{attrs:{id:"_3-quit-stop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-quit-stop"}},[a._v("#")]),a._v(" 3 quit-stop")]),a._v(" "),s("p",[s("strong",[a._v("退出Arthas")])]),a._v(" "),s("p",[a._v("用exit或者quit命令可以退出Arthas。")]),a._v(" "),s("p",[a._v("exit quit")]),a._v(" "),s("p",[a._v("退出Arthas之后，还可以再次用 java -jar arthas-boot.jar来连接。")]),a._v(" "),s("p",[s("strong",[a._v("彻底退出Arthas")])]),a._v(" "),s("p",[a._v("exit/quit命令只是退出当前session，arthas server还在目标进程中运行。")]),a._v(" "),s("p",[a._v("想完成退出Arthas，可以执行stop命令。")]),a._v(" "),s("p",[a._v("stop")]),a._v(" "),s("h2",{attrs:{id:"_4-thread"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-thread"}},[a._v("#")]),a._v(" 4 thread")]),a._v(" "),s("p",[a._v("查看当前线程信息，查看线程的堆栈。")]),a._v(" "),s("p",[s("strong",[a._v("thread -b")])]),a._v(" "),s("p",[a._v("找出当前阻塞其他线程的线程")]),a._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"/img/media/249e15f38419dc5327610163a4169769.png",width:"70%"}}),a._v(" "),s("h2",{attrs:{id:"_5-sysprop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-sysprop"}},[a._v("#")]),a._v(" 5 sysprop")]),a._v(" "),s("p",[a._v("查看当前JVM的系统属性。")]),a._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"/img/media/61e59f6b82d3dc24b3f291b3df117d4b.png",width:"70%"}}),a._v(" "),s("h2",{attrs:{id:"_6-heapdump"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-heapdump"}},[a._v("#")]),a._v(" 6 heapdump")]),a._v(" "),s("p",[a._v("类似jmap命令的heap dump功能。")]),a._v(" "),s("p",[a._v("heapdump /tmp/dump.hprof")]),a._v(" "),s("h2",{attrs:{id:"_7-dashboard"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-dashboard"}},[a._v("#")]),a._v(" 7 dashboard")]),a._v(" "),s("p",[a._v("dashboard命令可以查看当前系统的实时数据面板。")]),a._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"/img/media/a6a7da26ae685c3481590b9df2345434.png",width:"70%"}}),a._v(" "),s("h2",{attrs:{id:"_8-watch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-watch"}},[a._v("#")]),a._v(" 8 watch")]),a._v(" "),s("p",[a._v("观察指定方法的调用情况。能观察到的范围为：返回值、抛出异常、入参，通过编写 OGNL 表达式进行对应变量的查看。")]),a._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"/img/media/94a1c110b2a409c83cfee94f5183f215.png",width:"70%"}}),a._v(" "),s("p",[s("strong",[a._v("观察异常信息的例子：")])]),a._v(" "),s("p",[a._v('watch demo.MathGame primeFactors "{params[0],throwExp}" -e -x 2')]),a._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"/img/media/4401c427d15dc0424d83bed27543fe1c.png",width:"70%"}})])}),[],!1,null,null,null);t.default=e.exports}}]);