(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{521:function(t,a,_){"use strict";_.r(a);var s=_(18),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,_=t._self._c||a;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"_1-缓存雪崩"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-缓存雪崩"}},[t._v("#")]),t._v(" 1 缓存雪崩")]),t._v(" "),_("h3",{attrs:{id:"_1-1-什么是缓存雪崩"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是缓存雪崩"}},[t._v("#")]),t._v(" 1.1 什么是缓存雪崩？")]),t._v(" "),_("p",[t._v("缓存同一时间大面积失效，后面请求全部落到数据库，造成数据库短时间内承受大量请求而崩掉。")]),t._v(" "),_("h3",{attrs:{id:"_1-2-缓存雪崩有什么解决方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-缓存雪崩有什么解决方案"}},[t._v("#")]),t._v(" 1.2 缓存雪崩有什么解决方案？")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"left"}},[t._v("步骤")]),t._v(" "),_("th",[t._v("解决方案")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("事前")]),t._v(" "),_("td",[t._v("1）尽量保证整个redis集群高可用，发现机器宕机尽快补上。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}}),t._v(" "),_("td",[t._v("2）缓存失效时间可以在原来的基础上加多一个随机值，避免同一时间集体失效。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("事中")]),t._v(" "),_("td",[t._v("开启限流或者降级，避免Mysql崩掉。")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"left"}},[t._v("事后")]),t._v(" "),_("td",[t._v("利用redis持久化机制保存的数据尽快恢复缓存。")])])])]),t._v(" "),_("h2",{attrs:{id:"_2-缓存击穿"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-缓存击穿"}},[t._v("#")]),t._v(" 2 缓存击穿")]),t._v(" "),_("h3",{attrs:{id:"_2-1-什么是缓存击穿"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-什么是缓存击穿"}},[t._v("#")]),t._v(" 2.1 什么是缓存击穿？")]),t._v(" "),_("p",[_("strong",[t._v("Key对应的数据存在")]),t._v("，但是在redis未缓存或者已经过期，此时大量请求过来，由于redis中不存在，需要去数据库查询之后再回写redis缓存，造成大量请求直接打在数据库上，很容易把数据库压垮。")]),t._v(" "),_("h3",{attrs:{id:"_2-2-缓存击穿有什么解决方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-缓存击穿有什么解决方案"}},[t._v("#")]),t._v(" 2.2 缓存击穿有什么解决方案？")]),t._v(" "),_("p",[t._v("1）定时任务主动刷新缓存。")]),t._v(" "),_("p",[t._v("2）通过加锁的方式解决，用普通jvm的锁就可以。")]),t._v(" "),_("p",[t._v("查缓存时能命中则直接返回，不能命中则需要获取锁才能进行下一步访问数据库等操作。")]),t._v(" "),_("img",{staticClass:"imgcss",attrs:{src:"/img/media/eca8ee22dcef8bab5693996a9fb1d808.png",width:"35%"}}),t._v(" "),_("h2",{attrs:{id:"_3-缓存穿透"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-缓存穿透"}},[t._v("#")]),t._v(" 3 缓存穿透")]),t._v(" "),_("h3",{attrs:{id:"_3-1-什么是缓存穿透"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-什么是缓存穿透"}},[t._v("#")]),t._v(" 3.1 什么是缓存穿透？")]),t._v(" "),_("p",[_("strong",[t._v("Key对应的数据不存在")]),t._v("，一般是黑客故意去请求缓存中不存在的数据，导致所有的请求都落到数据库上，造成数据库短时间内承受大量请求而崩掉。")]),t._v(" "),_("h3",{attrs:{id:"_3-2-缓存穿透有什么解决方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-缓存穿透有什么解决方案"}},[t._v("#")]),t._v(" 3.2 缓存穿透有什么解决方案？")]),t._v(" "),_("p",[t._v("1）最简单粗暴的办法，如果一个查询返回的数据为空（不管数据不存在，还是系统故障），仍然把这个空结果进行缓存，但它的过期时间会很短，最长不超过五分钟。")]),t._v(" "),_("p",[t._v("2）采用布隆过滤器，将有值的key存放到布隆过滤器中，则没有值的key必然会被过滤掉。")])])}),[],!1,null,null,null);a.default=e.exports}}]);