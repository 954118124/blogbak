(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{545:function(t,a,s){"use strict";s.r(a);var r=s(18),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-trace"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-trace"}},[t._v("#")]),t._v(" 1 trace")]),t._v(" "),s("p",[t._v("利用trace命令追踪方法耗时。")]),t._v(" "),s("p",[t._v("https://arthas.aliyun.com/doc/trace.html")]),t._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"http://media.luoxiaofeng.cn/blog/img/5f987fcb30fb938420581eb30ec32d1f.png"}}),t._v(" "),s("p",[t._v("curl -O https://arthas.aliyun.com/arthas-boot.jar")]),t._v(" "),s("p",[t._v("java -jar arthas-boot.jar")]),t._v(" "),s("p",[t._v("trace com.yl.mhs.api.stream.kafka.receiver.WaybillOggApiReceiver doOggWaybillHandel")]),t._v(" "),s("h2",{attrs:{id:"_2-reset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-reset"}},[t._v("#")]),t._v(" 2 reset")]),t._v(" "),s("p",[t._v("通过reset命令可以重置增强类，将被 Arthas 增强过的类全部还原，"),s("strong",[t._v("Arthas 服务端关闭 时会重置所有增强过的类")]),t._v("。")]),t._v(" "),s("p",[t._v("Arthas在 watch/trace 等命令时，实际上是修改了应用的字节码，插入增强的代码。显式执行reset命令，可以清除掉这些增强代码。")]),t._v(" "),s("h2",{attrs:{id:"_3-quit-stop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-quit-stop"}},[t._v("#")]),t._v(" 3 quit-stop")]),t._v(" "),s("p",[s("strong",[t._v("退出Arthas")])]),t._v(" "),s("p",[t._v("用exit或者quit命令可以退出Arthas。")]),t._v(" "),s("p",[t._v("exit quit")]),t._v(" "),s("p",[t._v("退出Arthas之后，还可以再次用 java -jar arthas-boot.jar来连接。")]),t._v(" "),s("p",[s("strong",[t._v("彻底退出Arthas")])]),t._v(" "),s("p",[t._v("exit/quit命令只是退出当前session，arthas server还在目标进程中运行。")]),t._v(" "),s("p",[t._v("想完成退出Arthas，可以执行stop命令。")]),t._v(" "),s("p",[t._v("stop")]),t._v(" "),s("h2",{attrs:{id:"_4-thread"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-thread"}},[t._v("#")]),t._v(" 4 thread")]),t._v(" "),s("p",[t._v("查看当前线程信息，查看线程的堆栈。")]),t._v(" "),s("p",[s("strong",[t._v("thread -b")])]),t._v(" "),s("p",[t._v("找出当前阻塞其他线程的线程")]),t._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"http://media.luoxiaofeng.cn/blog/img/249e15f38419dc5327610163a4169769.png",width:"80%"}}),t._v(" "),s("h2",{attrs:{id:"_5-sysprop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-sysprop"}},[t._v("#")]),t._v(" 5 sysprop")]),t._v(" "),s("p",[t._v("查看当前JVM的系统属性。")]),t._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"http://media.luoxiaofeng.cn/blog/img/61e59f6b82d3dc24b3f291b3df117d4b.png",width:"80%"}}),t._v(" "),s("h2",{attrs:{id:"_6-heapdump"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-heapdump"}},[t._v("#")]),t._v(" 6 heapdump")]),t._v(" "),s("p",[t._v("类似jmap命令的heap dump功能。")]),t._v(" "),s("p",[t._v("heapdump /tmp/dump.hprof")]),t._v(" "),s("h2",{attrs:{id:"_7-dashboard"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-dashboard"}},[t._v("#")]),t._v(" 7 dashboard")]),t._v(" "),s("p",[t._v("dashboard命令可以查看当前系统的实时数据面板。")]),t._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"http://media.luoxiaofeng.cn/blog/img/a6a7da26ae685c3481590b9df2345434.png",width:"80%"}}),t._v(" "),s("h2",{attrs:{id:"_8-watch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-watch"}},[t._v("#")]),t._v(" 8 watch")]),t._v(" "),s("p",[t._v("观察指定方法的调用情况。能观察到的范围为：返回值、抛出异常、入参，通过编写 OGNL 表达式进行对应变量的查看。")]),t._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"http://media.luoxiaofeng.cn/blog/img/94a1c110b2a409c83cfee94f5183f215.png",width:"50%"}}),t._v(" "),s("p",[s("strong",[t._v("观察异常信息的例子：")])]),t._v(" "),s("p",[t._v('watch demo.MathGame primeFactors "{params[0],throwExp}" -e -x 2')]),t._v(" "),s("img",{staticClass:"imgcss",attrs:{src:"http://media.luoxiaofeng.cn/blog/img/4401c427d15dc0424d83bed27543fe1c.png",width:"80%"}})])}),[],!1,null,null,null);a.default=e.exports}}]);